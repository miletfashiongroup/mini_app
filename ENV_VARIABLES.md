# Environment Variables ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ environment variables, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ BRACE.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [Backend Variables](#backend-variables)
- [Frontend Variables](#frontend-variables)
- [Smoke Tests Variables](#smoke-tests-variables)
- [Production Setup](#production-setup)
- [Local Development](#local-development)

---

## Backend Variables

### üî¥ Required (–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)

#### `BRACE_TELEGRAM_BOT_TOKEN`
- –û–ø–∏—Å–∞–Ω–∏–µ: –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç @BotFather
- –§–æ—Ä–º–∞—Ç: –°—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`
- –ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å: [@BotFather](https://t.me/BotFather) ‚Üí `/newbot` ‚Üí —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω
- –ü—Ä–∏–º–µ—Ä: `BRACE_TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz`
- Production: ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ Render
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: üîí –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —Å–µ–∫—Ä–µ—Ç, –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git

#### `BRACE_DATABASE_URL` (–∏–ª–∏ `DATABASE_URL`)
- –û–ø–∏—Å–∞–Ω–∏–µ: Connection string –¥–ª—è PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –§–æ—Ä–º–∞—Ç: `postgresql+psycopg_async://user:password@host:port/database`
- –ü—Ä–∏–º–µ—Ä –¥–ª—è Render:
  ```
  BRACE_DATABASE_URL=postgresql+psycopg_async://user:pass@dpg-xxxxx-a.oregon-postgres.render.com:5432/brace_db
  ```
- Production: ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ Render
- –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: 
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è async –¥—Ä–∞–π–≤–µ—Ä `psycopg_async`
  - –î–ª—è Alembic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ sync –≤–µ—Ä—Å–∏—é
  - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DATABASE_URL` –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É
  - **–î–ª—è SSH —Ç—É–Ω–Ω–µ–ª—è:** –ï—Å–ª–∏ `SSH_TUNNEL_ENABLED=true`, URL –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ `localhost:5433` (—Å–º. SSH Tunnel Variables –Ω–∏–∂–µ)

---

### üü° Optional (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ, –∏–º–µ—é—Ç defaults)

#### `BRACE_ENVIRONMENT`
- –û–ø–∏—Å–∞–Ω–∏–µ: –û–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `development`, `production`, `staging`
- Default: `development`
- Production: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `production`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –í–ª–∏—è–µ—Ç –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, dev mode, –∏ –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### `BRACE_REDIS_URL`
- –û–ø–∏—Å–∞–Ω–∏–µ: URL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è rate limiting)
- –§–æ—Ä–º–∞—Ç: 
  - `redis://host:port/db` ‚Äî –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ Redis
  - `memory://` ‚Äî –¥–ª—è in-memory fallback (default)
- Default: `memory://`
- Production: 
  - –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π Redis
  - Render Redis: `redis://red-xxxxx:6379/0`
  - –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å `memory://` –µ—Å–ª–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

#### `BRACE_CORS_ORIGINS`
- –û–ø–∏—Å–∞–Ω–∏–µ: –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö origins –¥–ª—è CORS (JSON array)
- –§–æ—Ä–º–∞—Ç: JSON array —Å—Ç—Ä–æ–∫
- Default: `["http://localhost", "http://localhost:4173", "http://localhost:5173"]`
- Production: ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å production –¥–æ–º–µ–Ω–∞–º–∏
- –ü—Ä–∏–º–µ—Ä:
  ```json
  ["https://brace-1-frontend.onrender.com", "https://your-custom-domain.com"]
  ```

#### `BRACE_RATE_LIMIT`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è rate limiting
- **–§–æ—Ä–º–∞—Ç:** `"—á–∏—Å–ª–æ/–ø–µ—Ä–∏–æ–¥"` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"60/minute"`, `"100/hour"`)
- **Default:** `60/minute`
- **Production:** –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ `120/minute` –∏–ª–∏ –≤—ã—à–µ

#### `BRACE_TELEGRAM_WEBAPP_SECRET`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç –¥–ª—è Telegram WebApp (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–§–æ—Ä–º–∞—Ç:** –°—Ç—Ä–æ–∫–∞
- **Default:** `None` (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- **Production:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### `BRACE_TELEGRAM_WEBHOOK_SECRET`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –∑–∞—â–∏—Ç—ã Telegram webhook
- **–§–æ—Ä–º–∞—Ç:** –°—Ç—Ä–æ–∫–∞
- **Default:** –ù–µ –∑–∞–¥–∞–Ω
- **Production:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–¥–∞—Ç—å –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ Bot API `setWebhook` –∫–∞–∫ `secret_token`

#### `BRACE_ORDER_MANAGER_TELEGRAM_ID`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Telegram chat ID –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–∫–∞–∑–∞—Ö
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ (ID —á–∞—Ç–∞/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- **Default:** –ù–µ –∑–∞–¥–∞–Ω (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã)
- **Production:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–¥–∞—Ç—å

#### `BRACE_ALLOW_DEV_MODE`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –†–∞–∑—Ä–µ—à–∏—Ç—å dev mode (—Ç–æ–ª—å–∫–æ –¥–ª—è development!)
- **–§–æ—Ä–º–∞—Ç:** `true` / `false`
- **Default:** `false`
- **Production:** ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤ `true` –≤ production!

#### `BRACE_TELEGRAM_DEV_MODE`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è Telegram (—Ç–æ–ª—å–∫–æ –¥–ª—è development!)
- **–§–æ—Ä–º–∞—Ç:** `true` / `false`
- **Default:** `false`
- **Production:** ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤ `true` –≤ production!

#### `BRACE_TELEGRAM_DEV_TOKEN`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Dev-only —Ç–æ–∫–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ `BRACE_ALLOW_DEV_MODE=true` –∏ `BRACE_TELEGRAM_DEV_MODE=true`
- **Default:** `dev-telegram-token`
- **Production:** ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ production

#### `BRACE_LOG_LEVEL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:** `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`
- **Default:** `INFO`
- **Production:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è `INFO` –∏–ª–∏ `WARNING`

#### `BRACE_LOG_JSON`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSON —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ª–æ–≥–æ–≤
- **–§–æ—Ä–º–∞—Ç:** `true` / `false`
- **Default:** `true`
- **Production:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è `true` –¥–ª—è –ª–æ–≥-–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤

#### `BRACE_DATABASE_POOL_SIZE`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –†–∞–∑–º–µ—Ä connection pool –¥–ª—è –ë–î
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `5`
- **Production:** –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ `10-20` –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

#### `BRACE_DATABASE_MAX_OVERFLOW`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `5`
- **Production:** –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

#### `BRACE_DATABASE_ECHO`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è debugging!)
- **–§–æ—Ä–º–∞—Ç:** `true` / `false`
- **Default:** `false`
- **Production:** ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤ `true` –≤ production!

---

### üîµ Advanced / Internal Variables

#### `ALEMBIC_DATABASE_URL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Connection string –¥–ª—è Alembic –º–∏–≥—Ä–∞—Ü–∏–π (sync –≤–µ—Ä—Å–∏—è)
- **–§–æ—Ä–º–∞—Ç:** `postgresql+psycopg://user:password@host:port/database`
- **Default:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ `BRACE_DATABASE_URL`
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π DSN –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π

#### `DB_CONNECT_MAX_RETRIES`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (–¥–ª—è entrypoint.sh)
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `15`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è Docker entrypoint

#### `DB_CONNECT_RETRY_INTERVAL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (—Å–µ–∫—É–Ω–¥—ã)
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `5`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è Docker entrypoint

#### `ALEMBIC_MAX_RETRIES`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `10`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è Docker entrypoint

#### `ALEMBIC_RETRY_INTERVAL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ –º–∏–≥—Ä–∞—Ü–∏–π (—Å–µ–∫—É–Ω–¥—ã)
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `3`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è Docker entrypoint

#### `SEED_DB_MAX_RETRIES`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è seed —Å–∫—Ä–∏–ø—Ç–∞
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `10`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è seed —Å–∫—Ä–∏–ø—Ç–∞

#### `BRACE_ENV_FILE`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—É—Ç—å –∫ .env —Ñ–∞–π–ª—É
- **–§–æ—Ä–º–∞—Ç:** –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
- **Default:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π .env —Ñ–∞–π–ª

---

### üîµ SSH Tunnel Variables (–¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ REG.RU –ë–î)

#### `SSH_TUNNEL_ENABLED`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í–∫–ª—é—á–∏—Ç—å SSH —Ç—É–Ω–Ω–µ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- **–§–æ—Ä–º–∞—Ç:** `true` / `false`
- **Default:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (—Ç—É–Ω–Ω–µ–ª—å –æ—Ç–∫–ª—é—á–µ–Ω)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `true` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SSH —Ç—É–Ω–Ω–µ–ª—è –∫ REG.RU –ë–î

#### `SSH_HOST`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –•–æ—Å—Ç REG.RU —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–§–æ—Ä–º–∞—Ç:** IP –∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è
- **–ü—Ä–∏–º–µ—Ä:** `your-server.reg.ru` –∏–ª–∏ `123.45.67.89`
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ï—Å–ª–∏ `SSH_TUNNEL_ENABLED=true`

#### `SSH_USER`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–§–æ—Ä–º–∞—Ç:** –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ü—Ä–∏–º–µ—Ä:** `root` –∏–ª–∏ `postgres`
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ï—Å–ª–∏ `SSH_TUNNEL_ENABLED=true`

#### `SSH_PORT`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** SSH –ø–æ—Ä—Ç
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `22`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ï—Å–ª–∏ SSH –ø–æ—Ä—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π

#### `SSH_KEY`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–§–æ—Ä–º–∞—Ç:** –ü–æ–ª–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–≤–∫–ª—é—á–∞—è `-----BEGIN ... KEY-----` –∏ `-----END ... KEY-----`)
- **–ü—Ä–∏–º–µ—Ä:**
  ```
  -----BEGIN OPENSSH PRIVATE KEY-----
  b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
  ...
  -----END OPENSSH PRIVATE KEY-----
  ```
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ï—Å–ª–∏ `SSH_TUNNEL_ENABLED=true`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** üîí –•—Ä–∞–Ω–∏—Ç–µ –≤ Render Secrets, –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ git

#### `SSH_REMOTE_DB_HOST`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –•–æ—Å—Ç PostgreSQL –Ω–∞ REG.RU —Å–µ—Ä–≤–µ—Ä–µ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ SSH —Å–µ—Ä–≤–µ—Ä–∞)
- **–§–æ—Ä–º–∞—Ç:** `localhost` –∏–ª–∏ IP –∞–¥—Ä–µ—Å
- **Default:** `localhost`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –û–±—ã—á–Ω–æ `localhost`, —Ç–∞–∫ –∫–∞–∫ PostgreSQL –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ

#### `SSH_REMOTE_DB_PORT`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ—Ä—Ç PostgreSQL –Ω–∞ REG.RU —Å–µ—Ä–≤–µ—Ä–µ
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `5432`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ï—Å–ª–∏ PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç

#### `SSH_LOCAL_TUNNEL_PORT`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç –¥–ª—è SSH —Ç—É–Ω–Ω–µ–ª—è (–≤–Ω—É—Ç—Ä–∏ Render –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
- **–§–æ—Ä–º–∞—Ç:** –ß–∏—Å–ª–æ
- **Default:** `5433`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω —Ç—É–Ω–Ω–µ–ª—å

#### `SSH_DB_USER`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–§–æ—Ä–º–∞—Ç:** –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ï—Å–ª–∏ `SSH_TUNNEL_ENABLED=true` (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `BRACE_DATABASE_URL`)

#### `SSH_DB_PASSWORD`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–∞—Ä–æ–ª—å PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–§–æ—Ä–º–∞—Ç:** –ü–∞—Ä–æ–ª—å
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ï—Å–ª–∏ `SSH_TUNNEL_ENABLED=true` (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `BRACE_DATABASE_URL`)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** üîí –•—Ä–∞–Ω–∏—Ç–µ –≤ Render Secrets

#### `SSH_DB_NAME`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–º—è PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–§–æ—Ä–º–∞—Ç:** –ò–º—è –ë–î
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ï—Å–ª–∏ `SSH_TUNNEL_ENABLED=true` (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `BRACE_DATABASE_URL`)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ `SSH_TUNNEL_ENABLED=true` –∏ —É–∫–∞–∑–∞–Ω—ã `SSH_DB_USER`, `SSH_DB_PASSWORD`, `SSH_DB_NAME`, —Ç–æ `BRACE_DATABASE_URL` –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ `postgresql+psycopg_async://user:pass@localhost:5433/dbname`.

---

## Frontend Variables

### üî¥ Required (–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)

#### `VITE_API_BASE_URL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** URL backend API
- **–§–æ—Ä–º–∞—Ç:** –ü–æ–ª–Ω—ã–π URL (—Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º)
- **–ü—Ä–∏–º–µ—Ä:** `https://brace-1-backend.onrender.com`
- **Production:** ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ Render
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Vite, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ–ª–∂–Ω–∞ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `VITE_`
  - –ó–Ω–∞—á–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ bundle –ø—Ä–∏ —Å–±–æ—Ä–∫–µ

#### `VITE_APP_BASE_URL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** URL frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–§–æ—Ä–º–∞—Ç:** –ü–æ–ª–Ω—ã–π URL (—Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º)
- **–ü—Ä–∏–º–µ—Ä:** `https://brace-1-frontend.onrender.com`
- **Production:** ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ Render
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Telegram WebApp –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### `VITE_ENV`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** build-time —Ñ–ª–∞–≥ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`dev`, `stage`, `production`)
- **Default:** `dev`

---

### üü° Optional (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)

#### `VITE_DEV_INIT_DATA`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–µ—Å—Ç–æ–≤—ã–µ initData –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–§–æ—Ä–º–∞—Ç:** –°—Ç—Ä–æ–∫–∞ (Telegram initData)
- **Default:** –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
- **Production:** ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ production!
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¢–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ Telegram

---

## Smoke Tests Variables

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ smoke tests.

#### `SMOKE_DATABASE_URL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Database URL –¥–ª—è smoke tests
- **–§–æ—Ä–º–∞—Ç:** `postgresql+asyncpg://user:password@host:port/database`
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ò–º—è –ë–î –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å `brace_smoke` (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- **–ü—Ä–∏–º–µ—Ä:** `postgresql+asyncpg://postgres:postgres@localhost:5432/brace_smoke`

#### `SMOKE_BACKEND_URL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Backend URL –¥–ª—è smoke tests
- **Default:** `http://localhost:8000`

#### `SMOKE_FRONTEND_URL`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Frontend URL –¥–ª—è smoke tests
- **Default:** `http://localhost`

---

## Production Setup

### Render Backend Service

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Render Dashboard ‚Üí Backend Service ‚Üí Environment:

```bash
# Required
BRACE_TELEGRAM_BOT_TOKEN=your_bot_token  # dev fallback –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω –≤ prod
BRACE_DATABASE_URL=postgresql+psycopg_async://...
BRACE_CORS_ORIGINS=["https://your-frontend.onrender.com"]
BRACE_ENVIRONMENT=production

# Recommended
BRACE_REDIS_URL=redis://...  # –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å memory://
BRACE_RATE_LIMIT=120/minute
BRACE_LOG_LEVEL=INFO
BRACE_LOG_JSON=true
```

### Render Frontend Service

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Render Dashboard ‚Üí Frontend Service ‚Üí Environment:

```bash
# Required
VITE_API_BASE_URL=https://your-backend.onrender.com
VITE_APP_BASE_URL=https://your-frontend.onrender.com
VITE_ENV=production
```

### Render PostgreSQL

1. –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL service –≤ Render
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Internal Database URL** (–Ω–µ External!)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –∫–∞–∫ `BRACE_DATABASE_URL`
4. –§–æ—Ä–º–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `postgresql+psycopg_async://...`

---

## Local Development

### Backend

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:
   ```bash
   cp .env.example .env
   ```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```bash
   BRACE_TELEGRAM_BOT_TOKEN=your_dev_token
   BRACE_DATABASE_URL=postgresql+psycopg_async://postgres:postgres@localhost:5432/brace
   ```

3. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å defaults –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

### Frontend

1. –°–æ–∑–¥–∞–π—Ç–µ `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env`):
   ```bash
   VITE_API_BASE_URL=http://localhost:8000
   VITE_APP_BASE_URL=http://localhost:4173
   VITE_ENV=dev
   ```

2. Vite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.local` –∏–ª–∏ `.env`.

---

## Security Best Practices

1. ‚úÖ **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª—ã** (—É–∂–µ –≤ `.gitignore`)
2. ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Render Secrets** –¥–ª—è production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. ‚úÖ **–†–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤:** –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ `BRACE_TELEGRAM_BOT_TOKEN`
4. ‚úÖ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è production
5. ‚úÖ **CORS:** –£–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ origins
6. ‚úÖ **Dev Mode:** –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∫–ª—é—á–∞–π—Ç–µ –≤ production

---

## Troubleshooting

### Backend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BRACE_DATABASE_URL` —Ñ–æ—Ä–º–∞—Ç
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **Internal Database URL** (–¥–ª—è Render)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ (–Ω–µ —Å–ø–∏—Ç –Ω–∞ free tier)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `Render Dashboard ‚Üí Backend Service ‚Üí Logs`

### Frontend –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Backend

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `VITE_API_BASE_URL` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω—ã–π URL —Å `https://`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: `BRACE_CORS_ORIGINS` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å frontend URL
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω

### Rate Limiting —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–π

1. –£–≤–µ–ª–∏—á—å—Ç–µ `BRACE_RATE_LIMIT` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `120/minute`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Redis —Ä–∞–±–æ—Ç–∞–µ—Ç (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)

---

## –°–º. —Ç–∞–∫–∂–µ

- [DEPLOY.md](./DEPLOY.md) ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
- [README.md](./README.md) ‚Äî –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [.env.example](./.env.example) ‚Äî –®–∞–±–ª–æ–Ω .env —Ñ–∞–π–ª–∞
